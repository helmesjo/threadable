libs =
import libs += \
  threadable%lib{threadable} \
  google-benchmark%lib{benchmark} \
  doctest%lib{doctest} \
  libnanobench%lib{nanobench}

switch $cxx.class: regex.match
{
  case 'gcc' | 'clang.*'
    import libs += libtbb%lib{tbb}
}

exe{*}:
{
  test = true
  install = false
}

exe{threadable-benchmarks}: {hxx cxx}{util} cxx{queue.benchmark.cxx function.benchmark.cxx doctest} $libs
{
  test.arguments = --quiet=true
}

cxx.poptions =+ "-I$out_root" "-I$src_root"
